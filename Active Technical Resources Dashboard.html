<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ù†Ø§Ø¨Ø¹ ÙÙ†ÛŒ | Ú©Ø§ÙˆÛŒØ§Ù† ØªÙˆØ³Ø¹Ù‡ Ù…Ø¹Ø¯Ù†</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/svg+xml" href="https://cdn.grapesjs.com/workspaces/cmgvbwak408ja13nsemkia83b/assets/7e057c43-5d96-4c3a-a8fc-8bd5f6589a93__kavianpremiumbadgelogo.svg">
  
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: 'Vazirmatn', sans-serif;
          background: #f8fafc;
          color: #1a202c;
          direction: rtl;
      }

      .header {
          background: white;
          padding: 20px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
          position: sticky;
          top: 0;
          z-index: 100;
      }

      .header-content {
          max-width: 1200px;
          margin: 0 auto;
          display: flex;
          justify-content: space-between;
          align-items: center;
      }

      .logo {
          display: flex;
          align-items: center;
          gap: 15px;
      }

      .logo img {
          width: 50px;
          height: 50px;
      }

      .logo-text h1 {
          color: #2563eb;
          font-size: 1.5rem;
      }

      .logo-text p {
          color: #6b7280;
          font-size: 0.875rem;
      }

      .user-info {
          display: flex;
          align-items: center;
          gap: 20px;
      }

      .user-details {
          text-align: left;
      }

      .user-name {
          font-weight: 700;
          color: #1a202c;
      }

      .user-level {
          font-size: 0.875rem;
          color: #6b7280;
      }

      .logout-btn {
          background: #dc2626;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 8px;
          cursor: pointer;
          font-weight: 600;
          transition: all 0.3s;
      }

      .logout-btn:hover {
          background: #b91c1c;
      }

      .main-container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 30px 20px;
      }

      .welcome-section {
          background: linear-gradient(135deg, #2563eb, #1d4ed8);
          color: white;
          padding: 40px;
          border-radius: 16px;
          margin-bottom: 30px;
          text-align: center;
      }

      .welcome-section h2 {
          font-size: 2rem;
          font-weight: 800;
          margin-bottom: 10px;
      }

      .welcome-section p {
          opacity: 0.9;
          font-size: 1.1rem;
      }

      .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 20px;
          margin-bottom: 30px;
      }

      .stat-card {
          background: white;
          padding: 25px;
          border-radius: 12px;
          text-align: center;
          box-shadow: 0 2px 10px rgba(0,0,0,0.05);
          border: 2px solid transparent;
          transition: all 0.3s;
      }

      .stat-card:hover {
          transform: translateY(-3px);
          border-color: #2563eb;
      }

      .stat-icon {
          font-size: 2.5rem;
          margin-bottom: 15px;
      }

      .stat-title {
          font-size: 1.1rem;
          font-weight: 600;
          color: #1a202c;
          margin-bottom: 5px;
      }

      .stat-value {
          font-size: 2rem;
          font-weight: 900;
          color: #2563eb;
      }

      .tools-section {
          margin-bottom: 40px;
      }

      .section-title {
          font-size: 1.75rem;
          font-weight: 800;
          color: #1a202c;
          margin-bottom: 20px;
          display: flex;
          align-items: center;
          gap: 10px;
      }

      .tools-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 20px;
      }

      .tool-card {
          background: white;
          border-radius: 12px;
          padding: 25px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.05);
          border: 2px solid transparent;
          transition: all 0.3s;
          cursor: pointer;
          position: relative;
          overflow: hidden;
      }

      .tool-card:hover {
          transform: translateY(-5px);
          border-color: #2563eb;
          box-shadow: 0 10px 30px rgba(37,99,235,0.2);
      }

      .tool-card.locked {
          opacity: 0.6;
          cursor: not-allowed;
      }

      .tool-card.locked:hover {
          transform: none;
          border-color: #e5e7eb;
      }

      .tool-icon {
          font-size: 3rem;
          margin-bottom: 15px;
          display: block;
      }

      .tool-title {
          font-size: 1.25rem;
          font-weight: 700;
          color: #1a202c;
          margin-bottom: 10px;
      }

      .tool-description {
          color: #6b7280;
          line-height: 1.6;
          margin-bottom: 15px;
      }

      .tool-level {
          display: inline-block;
          background: #e0f2fe;
          color: #0369a1;
          padding: 4px 12px;
          border-radius: 20px;
          font-size: 0.875rem;
          font-weight: 600;
      }

      .tool-lock-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0,0,0,0.8);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          color: white;
          border-radius: 12px;
      }

      .lock-icon {
          font-size: 2rem;
          margin-bottom: 10px;
      }

      .lock-text {
          font-weight: 600;
      }

      .resources-section {
          margin-bottom: 40px;
      }

      .resources-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 20px;
      }

      .resource-card {
          background: white;
          border-radius: 12px;
          padding: 20px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.05);
          transition: all 0.3s;
      }

      .resource-card:hover {
          transform: translateY(-3px);
          box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      }

      .resource-icon {
          font-size: 2rem;
          margin-bottom: 15px;
      }

      .resource-title {
          font-size: 1.1rem;
          font-weight: 700;
          color: #1a202c;
          margin-bottom: 10px;
      }

      .resource-count {
          color: #6b7280;
          font-size: 0.875rem;
      }

      .quick-actions {
          background: white;
          border-radius: 12px;
          padding: 25px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      }

      .actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 15px;
      }

      .action-btn {
          background: #f8fafc;
          border: 2px solid #e5e7eb;
          border-radius: 10px;
          padding: 20px;
          text-align: center;
          cursor: pointer;
          transition: all 0.3s;
          text-decoration: none;
          color: inherit;
      }

      .action-btn:hover {
          background: #2563eb;
          color: white;
          border-color: #2563eb;
      }

      .action-icon {
          font-size: 2rem;
          margin-bottom: 10px;
          display: block;
      }

      .action-title {
          font-weight: 600;
      }

      .password-change-modal {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0,0,0,0.7);
          display: none;
          align-items: center;
          justify-content: center;
          z-index: 1000;
      }

      .modal-content {
          background: white;
          border-radius: 12px;
          padding: 30px;
          max-width: 400px;
          width: 90%;
      }

      .modal-header {
          text-align: center;
          margin-bottom: 20px;
      }

      .form-group {
          margin-bottom: 20px;
      }

      .form-label {
          display: block;
          margin-bottom: 5px;
          font-weight: 600;
          color: #374151;
      }

      .form-input {
          width: 100%;
          padding: 10px;
          border: 2px solid #e5e7eb;
          border-radius: 8px;
          font-family: inherit;
      }

      .form-input:focus {
          outline: none;
          border-color: #2563eb;
      }

      .modal-buttons {
          display: flex;
          gap: 10px;
          justify-content: center;
      }

      .btn {
          padding: 10px 20px;
          border: none;
          border-radius: 8px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
      }

      .btn-primary {
          background: #2563eb;
          color: white;
      }

      .btn-secondary {
          background: #6b7280;
          color: white;
      }

      @media (max-width: 768px) {
          .header-content {
              flex-direction: column;
              gap: 15px;
          }

          .user-info {
              flex-direction: column;
              gap: 10px;
          }

          .welcome-section {
              padding: 30px 20px;
          }

          .welcome-section h2 {
              font-size: 1.5rem;
          }

          .stats-grid {
              grid-template-columns: repeat(2, 1fr);
          }

          .tools-grid {
              grid-template-columns: 1fr;
          }
      }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
      <div class="header-content">
          <div class="logo">
              <img src="https://cdn.grapesjs.com/workspaces/cmgvbwak408ja13nsemkia83b/assets/7e057c43-5d96-4c3a-a8fc-8bd5f6589a93__kavianpremiumbadgelogo.svg" alt="Ú©Ø§ÙˆÛŒØ§Ù†">
              <div class="logo-text">
                  <h1>Ù…Ù†Ø§Ø¨Ø¹ ÙÙ†ÛŒ Ú©Ø§ÙˆÛŒØ§Ù†</h1>
                  <p>Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ø¯Ù†ÛŒ</p>
              </div>
          </div>
          <div class="user-info">
              <div class="user-details">
                  <div class="user-name" id="username-display">Ú©Ø§Ø±Ø¨Ø±</div>
                  <div class="user-level" id="user-level">Ø³Ø·Ø­ Ø¯Ø³ØªØ±Ø³ÛŒ</div>
              </div>
              <button class="logout-btn" id="logout-btn">Ø®Ø±ÙˆØ¬</button>
          </div>
      </div>
  </header>

  <!-- Main Content -->
  <main class="main-container">
      <!-- Welcome Section -->
      <section class="welcome-section">
          <h2>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!</h2>
          <p>Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ù…Ù†Ø§Ø¨Ø¹ ÙÙ†ÛŒ Ú©Ø§ÙˆÛŒØ§Ù† ØªÙˆØ³Ø¹Ù‡ Ù…Ø¹Ø¯Ù† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</p>
      </section>

      <!-- Stats -->
      <div class="stats-grid">
          <div class="stat-card">
              <div class="stat-icon">ğŸ› ï¸</div>
              <div class="stat-title">Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯</div>
              <div class="stat-value" id="tools-count">12</div>
          </div>
          <div class="stat-card">
              <div class="stat-icon">ğŸ“š</div>
              <div class="stat-title">Ù…Ù†Ø§Ø¨Ø¹ Ø¢Ù…ÙˆØ²Ø´ÛŒ</div>
              <div class="stat-value" id="resources-count">45</div>
          </div>
          <div class="stat-card">
              <div class="stat-icon">ğŸ“Š</div>
              <div class="stat-title">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</div>
              <div class="stat-value" id="reports-count">23</div>
          </div>
          <div class="stat-card">
              <div class="stat-icon">âš¡</div>
              <div class="stat-title">Ø¢Ø®Ø±ÛŒÙ† ÙˆØ±ÙˆØ¯</div>
              <div class="stat-value" id="last-login">Ø§Ù…Ø±ÙˆØ²</div>
          </div>
      </div>

      <!-- Tools Section -->
      <section class="tools-section">
          <h2 class="section-title">ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ ØªØ®ØµØµÛŒ</h2>
          <div class="tools-grid" id="tools-grid">
              <!-- Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
          </div>
      </section>

      <!-- Resources Section -->
      <section class="resources-section">
          <h2 class="section-title">ğŸ“š Ù…Ù†Ø§Ø¨Ø¹ Ø¢Ù…ÙˆØ²Ø´ÛŒ</h2>
          <div class="resources-grid">
              <div class="resource-card">
                  <div class="resource-icon">ğŸ“–</div>
                  <div class="resource-title">Ø±Ø§Ù‡Ù†Ù…Ø§Ù‡Ø§ÛŒ ÙÙ†ÛŒ</div>
                  <div class="resource-count">15 Ø±Ø§Ù‡Ù†Ù…Ø§</div>
              </div>
              <div class="resource-card">
                  <div class="resource-icon">ğŸ“‹</div>
                  <div class="resource-title">Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§</div>
                  <div class="resource-count">8 Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯</div>
              </div>
              <div class="resource-card">
                  <div class="resource-icon">ğŸ¥</div>
                  <div class="resource-title">ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ</div>
                  <div class="resource-count">12 ÙˆÛŒØ¯ÛŒÙˆ</div>
              </div>
              <div class="resource-card">
                  <div class="resource-icon">ğŸ“Š</div>
                  <div class="resource-title">Ù†Ù…ÙˆÙ†Ù‡ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</div>
                  <div class="resource-count">10 Ù†Ù…ÙˆÙ†Ù‡</div>
              </div>
          </div>
      </section>

      <!-- Quick Actions -->
      <section class="quick-actions">
          <h2 class="section-title">âš¡ Ø¹Ù…Ù„ÛŒØ§Øª Ø³Ø±ÛŒØ¹</h2>
          <div class="actions-grid">
              <a href="#" class="action-btn" onclick="showPasswordModal()">
                  <span class="action-icon">ğŸ”‘</span>
                  <span class="action-title">ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</span>
              </a>
              <a href="#" class="action-btn">
                  <span class="action-icon">ğŸ“§</span>
                  <span class="action-title">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</span>
              </a>
              <a href="#" class="action-btn">
                  <span class="action-icon">ğŸ“±</span>
                  <span class="action-title">Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†</span>
              </a>
              <a href="#" class="action-btn">
                  <span class="action-icon">ğŸ“ˆ</span>
                  <span class="action-title">Ú¯Ø²Ø§Ø±Ø´ ÙØ¹Ø§Ù„ÛŒØª</span>
              </a>
          </div>
      </section>
  </main>

  <!-- Password Change Modal -->
  <div class="password-change-modal" id="password-modal">
      <div class="modal-content">
          <div class="modal-header">
              <h3>ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</h3>
          </div>
          <form id="password-form">
              <div class="form-group">
                  <label class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ÙØ¹Ù„ÛŒ:</label>
                  <input type="password" class="form-input" id="current-password" required>
              </div>
              <div class="form-group">
                  <label class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯:</label>
                  <input type="password" class="form-input" id="new-password" required>
              </div>
              <div class="form-group">
                  <label class="form-label">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯:</label>
                  <input type="password" class="form-input" id="confirm-password" required>
              </div>
              <div class="modal-buttons">
                  <button type="submit" class="btn btn-primary">ØªØºÛŒÛŒØ± Ø±Ù…Ø²</button>
                  <button type="button" class="btn btn-secondary" onclick="hidePasswordModal()">Ø§Ù†ØµØ±Ø§Ù</button>
              </div>
          </form>
      </div>
  </div>

  <script>
      // ØªØ¹Ø±ÛŒÙ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ùˆ Ø³Ø·ÙˆØ­ Ø¯Ø³ØªØ±Ø³ÛŒ
      const TOOLS = [
          {
              id: 'tonnage-calculator',
              title: 'Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªÙ†Ø§Ú˜',
              description: 'Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªÙ†Ø§Ú˜ Ù…Ø¹Ø¯Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ø¨Ø¹Ø§Ø¯ Ùˆ Ú†Ú¯Ø§Ù„ÛŒ',
              icon: 'âš–ï¸',
              requiredPermission: 'view_basic',
              level: 'Ù…Ø´Ø§Ù‡Ø¯Ù‡â€ŒÚ¯Ø±'
          },
          {
              id: 'blast-pattern',
              title: 'Ø·Ø±Ø§Ø­ÛŒ Ø§Ù„Ú¯ÙˆÛŒ Ø§Ù†ÙØ¬Ø§Ø±',
              description: 'Ø·Ø±Ø§Ø­ÛŒ Ø§Ù„Ú¯ÙˆÛŒ Ø­ÙØ§Ø±ÛŒ Ùˆ Ø§Ù†ÙØ¬Ø§Ø±',
              icon: 'ğŸ’¥',
              requiredPermission: 'view_engineering',
              level: 'Ù…Ù‡Ù†Ø¯Ø³'
          },
          {
              id: 'fleet-optimization',
              title: 'Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù†Ø§ÙˆÚ¯Ø§Ù†',
              description: 'Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù†Ø§ÙˆÚ¯Ø§Ù† Ø­Ù…Ù„ Ùˆ Ù†Ù‚Ù„ Ù…Ø¹Ø¯Ù†',
              icon: 'ğŸš›',
              requiredPermission: 'view_engineering',
              level: 'Ù…Ù‡Ù†Ø¯Ø³'
          },
          {
              id: 'economic-analysis',
              title: 'ØªØ­Ù„ÛŒÙ„ Ø§Ù‚ØªØµØ§Ø¯ÛŒ',
              description: 'ØªØ­Ù„ÛŒÙ„ Ø§Ù‚ØªØµØ§Ø¯ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ø¯Ù†ÛŒ',
              icon: 'ğŸ’°',
              requiredPermission: 'project_management',
              level: 'Ù…Ø¯ÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡'
          },
          {
              id: 'resource-estimation',
              title: 'Ø¨Ø±Ø¢ÙˆØ±Ø¯ Ù…Ù†Ø§Ø¨Ø¹',
              description: 'Ø¨Ø±Ø¢ÙˆØ±Ø¯ Ù…Ù†Ø§Ø¨Ø¹ Ùˆ Ø°Ø®Ø§ÛŒØ± Ù…Ø¹Ø¯Ù†ÛŒ',
              icon: 'ğŸ“Š',
              requiredPermission: 'view_analysis',
              level: 'ØªØ­Ù„ÛŒÙ„Ú¯Ø±'
          },
          {
              id: 'environmental-impact',
              title: 'Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù…Ø­ÛŒØ·â€ŒØ²ÛŒØ³Øª',
              description: 'Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø«Ø±Ø§Øª Ø²ÛŒØ³Øªâ€ŒÙ…Ø­ÛŒØ·ÛŒ',
              icon: 'ğŸŒ±',
              requiredPermission: 'view_engineering',
              level: 'Ù…Ù‡Ù†Ø¯Ø³'
          },
          {
              id: 'safety-analysis',
              title: 'ØªØ­Ù„ÛŒÙ„ Ø§ÛŒÙ…Ù†ÛŒ',
              description: 'ØªØ­Ù„ÛŒÙ„ Ùˆ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø§ÛŒÙ…Ù†ÛŒ Ù…Ø¹Ø¯Ù†',
              icon: 'ğŸ›¡ï¸',
              requiredPermission: 'view_analysis',
              level: 'ØªØ­Ù„ÛŒÙ„Ú¯Ø±'
          },
          {
              id: 'production-planning',
              title: 'Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ ØªÙˆÙ„ÛŒØ¯',
              description: 'Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù…Ø¹Ø¯Ù†',
              icon: 'ğŸ“…',
              requiredPermission: 'project_management',
              level: 'Ù…Ø¯ÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡'
          },
          {
              id: 'cost-estimation',
              title: 'Ø¨Ø±Ø¢ÙˆØ±Ø¯ Ù‡Ø²ÛŒÙ†Ù‡',
              description: 'Ø¨Ø±Ø¢ÙˆØ±Ø¯ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒØ§ØªÛŒ Ùˆ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒØ§ÛŒ',
              icon: 'ğŸ’³',
              requiredPermission: 'view_analysis',
              level: 'ØªØ­Ù„ÛŒÙ„Ú¯Ø±'
          },
          {
              id: 'ventilation-design',
              title: 'Ø·Ø±Ø§Ø­ÛŒ ØªÙ‡ÙˆÛŒÙ‡',
              description: 'Ø·Ø±Ø§Ø­ÛŒ Ø³ÛŒØ³ØªÙ… ØªÙ‡ÙˆÛŒÙ‡ Ù…Ø¹Ø§Ø¯Ù† Ø²ÛŒØ±Ø²Ù…ÛŒÙ†ÛŒ',
              icon: 'ğŸ’¨',
              requiredPermission: 'view_engineering',
              level: 'Ù…Ù‡Ù†Ø¯Ø³'
          },
          {
              id: 'water-management',
              title: 'Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ø¨',
              description: 'Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ù†Ø§Ø¨Ø¹ Ø¢Ø¨ Ø¯Ø± Ù…Ø¹Ø¯Ù†',
              icon: 'ğŸ’§',
              requiredPermission: 'view_engineering',
              level: 'Ù…Ù‡Ù†Ø¯Ø³'
          },
          {
              id: 'quality-control',
              title: 'Ú©Ù†ØªØ±Ù„ Ú©ÛŒÙÛŒØª',
              description: 'Ú©Ù†ØªØ±Ù„ Ú©ÛŒÙÛŒØª Ù…ÙˆØ§Ø¯ Ù…Ø¹Ø¯Ù†ÛŒ',
              icon: 'ğŸ”¬',
              requiredPermission: 'view_analysis',
              level: 'ØªØ­Ù„ÛŒÙ„Ú¯Ø±'
          }
      ];

      // Ø³Ø·ÙˆØ­ Ø¯Ø³ØªØ±Ø³ÛŒ
      const ACCESS_LEVELS = {
          viewer: 'Ù…Ø´Ø§Ù‡Ø¯Ù‡â€ŒÚ¯Ø±',
          analyst: 'ØªØ­Ù„ÛŒÙ„Ú¯Ø±',
          engineer: 'Ù…Ù‡Ù†Ø¯Ø³',
          manager: 'Ù…Ø¯ÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡'
      };

      // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
      function checkAuth() {
          const savedLogin = localStorage.getItem('technicalLogin') || 
                            sessionStorage.getItem('technicalLogin');
          
          if (!savedLogin) {
              window.location.href = './technical-login.html';
              return null;
          }
          
          try {
              const loginData = JSON.parse(savedLogin);
              const loginTime = new Date(loginData.loginTime);
              const now = new Date();
              const hoursDiff = (now - loginTime) / (1000 * 60 * 60);
              
              if (hoursDiff > 24) {
                  localStorage.removeItem('technicalLogin');
                  sessionStorage.removeItem('technicalLogin');
                  window.location.href = './technical-login.html';
                  return null;
              }
              
              return loginData;
          } catch (error) {
              localStorage.removeItem('technicalLogin');
              sessionStorage.removeItem('technicalLogin');
              window.location.href = './technical-login.html';
              return null;
          }
      }

      // Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬ÙˆØ² Ø¯Ø³ØªØ±Ø³ÛŒ
      function hasPermission(requiredPermission, userPermissions) {
          if (!requiredPermission) return true;
          return userPermissions.includes(requiredPermission) || userPermissions.includes('view_all');
      }

      // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§
      function loadTools(user) {
          const toolsGrid = document.getElementById('tools-grid');
          
          toolsGrid.innerHTML = TOOLS.map(tool => {
              const hasAccess = hasPermission(tool.requiredPermission, user.permissions);
              
              return `
                  <div class="tool-card ${hasAccess ? '' : 'locked'}" data-tool-id="${tool.id}" ${hasAccess ? `onclick="openTool('${tool.id}')"` : ''}>
                      <span class="tool-icon">${tool.icon}</span>
                      <h3 class="tool-title">${tool.title}</h3>
                      <p class="tool-description">${tool.description}</p>
                      <span class="tool-level">${tool.level}</span>
                      
                      ${!hasAccess ? `
                          <div class="tool-lock-overlay">
                              <div class="lock-icon">ğŸ”’</div>
                              <div class="lock-text">Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø³Ø·Ø­ ${tool.level}</div>
                          </div>
                      ` : ''}
                  </div>
              `;
          }).join('');
      }

      // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø§Ø¨Ø²Ø§Ø±
      function openTool(toolId) {
          // Ø¯Ø± Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙˆØ§Ù‚Ø¹ÛŒØŒ Ø§Ø¨Ø²Ø§Ø± Ù…Ø±Ø¨ÙˆØ·Ù‡ Ø¨Ø§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯
          alert(`ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø± "${TOOLS.find(t => t.id === toolId)?.title}" Ø¯Ø± Ø­Ø§Ù„ ØªÙˆØ³Ø¹Ù‡ Ø§Ø³Øª`);
      }

      // Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
      function showPasswordModal() {
          document.getElementById('password-modal').style.display = 'flex';
      }

      // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù…ÙˆØ¯Ø§Ù„
      function hidePasswordModal() {
          document.getElementById('password-modal').style.display = 'none';
          document.getElementById('password-form').reset();
      }

      // ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
      function changePassword(oldPassword, newPassword) {
          const user = checkAuth();
          if (!user) return false;

          // Ø¯Ø± Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙˆØ§Ù‚Ø¹ÛŒØŒ Ø§ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
          // Ø§ÛŒÙ†Ø¬Ø§ ÙÙ‚Ø· Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
          
          // Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ
          const demoUsers = {
              'view_2024': 'Kv8mR3nP',
              'anl_2024': 'An7xQ5wE',
              'eng_2024': 'Eg9mT4rY',
              'mgr_2024': 'Mg6nX8sD'
          };

          if (demoUsers[user.username] && demoUsers[user.username] === oldPassword) {
              alert('âœ… Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØºÛŒÛŒØ± ÛŒØ§ÙØª (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)');
              return true;
          }

          // Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡
          const approvedUsers = JSON.parse(localStorage.getItem('approvedUsers') || '[]');
          const userIndex = approvedUsers.findIndex(u => 
              u.username === user.username && u.password === oldPassword
          );

          if (userIndex !== -1) {
              approvedUsers[userIndex].password =  approvedUsers[userIndex].password = newPassword;
                localStorage.setItem('approvedUsers', JSON.stringify(approvedUsers));
                alert('âœ… Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØºÛŒÛŒØ± ÛŒØ§ÙØª');
                return true;
            }

            alert('âŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ÙØ¹Ù„ÛŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');
            return false;
        }

        // Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±Ù… ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
        document.getElementById('password-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (newPassword !== confirmPassword) {
                alert('âŒ ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù…Ø·Ø§Ø¨Ù‚Øª Ù†Ø¯Ø§Ø±Ø¯');
                return;
            }
            
            if (newPassword.length < 6) {
                alert('âŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ 6 Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø§Ø´Ø¯');
                return;
            }
            
            if (changePassword(currentPassword, newPassword)) {
                hidePasswordModal();
            }
        });

        // Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ…
        document.getElementById('logout-btn').addEventListener('click', function() {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø®Ø§Ø±Ø¬ Ø´ÙˆÛŒØ¯ØŸ')) {
                localStorage.removeItem('technicalLogin');
                sessionStorage.removeItem('technicalLogin');
                window.location.href = './technical-login.html';
            }
        });

        // Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡
        document.getElementById('password-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                hidePasswordModal();
            }
        });

        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ ØµÙØ­Ù‡
        document.addEventListener('DOMContentLoaded', function() {
            const user = checkAuth();
            if (!user) return;

            // Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
            document.getElementById('username-display').textContent = user.fullName || user.username;
            document.getElementById('user-level').textContent = ACCESS_LEVELS[user.accessLevel] || user.accessLevel;

            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§
            loadTools(user);

            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±
            const accessibleTools = TOOLS.filter(tool => 
                hasPermission(tool.requiredPermission, user.permissions)
            ).length;
            
            document.getElementById('tools-count').textContent = accessibleTools;
            
            // Ù†Ù…Ø§ÛŒØ´ Ø¢Ø®Ø±ÛŒÙ† ÙˆØ±ÙˆØ¯
            const loginTime = new Date(user.loginTime);
            const now = new Date();
            const hoursDiff = Math.floor((now - loginTime) / (1000 * 60 * 60));
            
            let lastLoginText;
            if (hoursDiff < 1) {
                lastLoginText = 'Ø§Ú©Ù†ÙˆÙ†';
            } else if (hoursDiff < 24) {
                lastLoginText = `${hoursDiff} Ø³Ø§Ø¹Øª Ù¾ÛŒØ´`;
            } else {
                const daysDiff = Math.floor(hoursDiff / 24);
                lastLoginText = `${daysDiff} Ø±ÙˆØ² Ù¾ÛŒØ´`;
            }
            
            document.getElementById('last-login').textContent = lastLoginText;

            console.log('âœ… Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ù†Ø§Ø¨Ø¹ ÙÙ†ÛŒ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª!');
            console.log('ğŸ‘¤ Ú©Ø§Ø±Ø¨Ø±:', user.fullName || user.username);
            console.log('ğŸ” Ø³Ø·Ø­ Ø¯Ø³ØªØ±Ø³ÛŒ:', ACCESS_LEVELS[user.accessLevel]);
            console.log('ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³:', accessibleTools);
        });

        // Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…ÛŒØ§Ù†Ø¨Ø±
        document.addEventListener('keydown', function(e) {
            // Ctrl + L Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬
            if (e.ctrlKey && e.key === 'l') {
                e.preventDefault();
                document.getElementById('logout-btn').click();
            }
            
            // Ctrl + P Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                showPasswordModal();
            }
            
            // Escape Ø¨Ø±Ø§ÛŒ Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„
            if (e.key === 'Escape') {
                hidePasswordModal();
            }
        });

        // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ
        window.addEventListener('load', function() {
            const cards = document.querySelectorAll('.tool-card, .stat-card, .resource-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    card.style.transition = 'all 0.5s ease-out';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });

        // Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ© (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.body.style.background = '#1a202c';
            document.body.style.color = '#f7fafc';
        }

        // Ù†Ù…Ø§ÛŒØ´ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø®ÙˆØ´â€ŒØ¢Ù…Ø¯Ú¯ÙˆÛŒÛŒ
        setTimeout(() => {
            const user = checkAuth();
            if (user && user.isDemoAccount) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #2563eb;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 10px;
                    box-shadow: 0 10px 30px rgba(37,99,235,0.3);
                    z-index: 1000;
                    animation: slideIn 0.5s ease-out;
                `;
                
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 1.5rem;">ğŸ‘‹</span>
                        <div>
                            <div style="font-weight: bold;">Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!</div>
                            <div style="font-size: 0.875rem; opacity: 0.9;">Ø§Ø² Ø­Ø³Ø§Ø¨ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯</div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² 5 Ø«Ø§Ù†ÛŒÙ‡
                setTimeout(() => {
                    notification.style.animation = 'slideOut 0.5s ease-out forwards';
                    setTimeout(() => notification.remove(), 500);
                }, 5000);
            }
        }, 1000);

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

    </script>
</body>
</html>
